<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jogo da EN2 ‚Äî Base Est√°vel</title>

<style>
body{
  margin:0;
  background:#111;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
}
h1{text-align:center}

.game{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:20px;
}

.board-frame{
  width:1000px;
  height:750px;
  position:relative;
  overflow:hidden;
  border-radius:10px;
}
.board-img{
  position:absolute;
  inset:0;
  background:url("https://i.imgur.com/SgYhoY8.png") center/cover no-repeat;
}

.pawn{
  position:absolute;
  transform:translate(-50%,-50%);
  font-size:22px;
  z-index:10;
  pointer-events:none;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button{
  background:#f5c400;
  border:none;
  padding:10px 18px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

.hidden{display:none}

#objectivePanel{
  width:280px;
  background:#1b1b1b;
  border-radius:10px;
  padding:14px;
}
</style>
</head>

<body>

<h1>Jogo da EN2 ‚Äî Base Est√°vel</h1>

<div class="game">

  <div class="board-frame" id="board">
    <div class="board-img"></div>
    <div class="pawn" id="pawn0">üöó</div>
    <div class="pawn" id="pawn1">üö¥</div>
    <div class="pawn" id="pawn2">üèçÔ∏è</div>
    <div class="pawn" id="pawn3">üö∂</div>
  </div>

  <div id="objectivePanel" class="hidden"></div>

</div>

<div class="controls">

  <div id="setup">
    Jogadores:
    <select id="playerCount">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>
    <button id="startBtn">COME√áAR</button>
  </div>

  <div id="gameControls" class="hidden">
    <button id="rollBtn">JOGAR</button>
    üé≤ <span id="diceVal">‚Äî</span>
    <p id="turnInfo"></p>
  </div>

</div>

<script>
// ===============================
// SPACES ‚Äî EN2 REAL (IN√çCIO + TESTE)
// ===============================
const SPACES = [
  {x:0.091,y:0.114}, // Chaves
  {x:0.087,y:0.163},
  {x:0.087,y:0.215},
  {x:0.092,y:0.270},
  {x:0.127,y:0.236},
  {x:0.151,y:0.190},
  {x:0.176,y:0.144},
  {x:0.219,y:0.113},
  {x:0.265,y:0.094},
  {x:0.306,y:0.102},
  {x:0.346,y:0.130},
  {x:0.360,y:0.177},
  {x:0.325,y:0.216},
  {x:0.288,y:0.192},
  {x:0.243,y:0.172},
  {x:0.220,y:0.218},
  {x:0.238,y:0.270},
  {x:0.228,y:0.319},
  {x:0.181,y:0.327},
  {x:0.139,y:0.336}
  // üëâ depois podes colar aqui o SPACES completo
];

// ===============================
// OBJETIVOS
// ===============================
const OBJECTIVES = [
  "Chegar primeiro a Faro",
  "Chegar em √∫ltimo a Faro",
  "Visitar Peso da R√©gua",
  "Visitar Lamego"
];

// ===============================
// ELEMENTOS
// ===============================
const board = document.getElementById("board");
const pawns = [
  document.getElementById("pawn0"),
  document.getElementById("pawn1"),
  document.getElementById("pawn2"),
  document.getElementById("pawn3")
];

const startBtn = document.getElementById("startBtn");
const rollBtn = document.getElementById("rollBtn");
const diceVal = document.getElementById("diceVal");
const turnInfo = document.getElementById("turnInfo");
const objectivePanel = document.getElementById("objectivePanel");
const setup = document.getElementById("setup");
const gameControls = document.getElementById("gameControls");
const playerCount = document.getElementById("playerCount");

// ===============================
// ESTADO
// ===============================
let players = [];
let positions = [0,0,0,0];
let currentPlayer = 0;

// ===============================
// FUN√á√ïES
// ===============================
function placePawn(pawn, index){
  const s = SPACES[index];
  pawn.style.left = (s.x * board.clientWidth) + "px";
  pawn.style.top  = (s.y * board.clientHeight) + "px";
}

// ===============================
// START
// ===============================
startBtn.onclick = () => {
  players = [];
  positions = [0,0,0,0];
  currentPlayer = 0;

  const count = Number(playerCount.value);

  for(let i=0;i<count;i++){
    players.push({
      pawn:i,
      objective: OBJECTIVES[i % OBJECTIVES.length]
    });
  }

  pawns.forEach(p => p.style.display="none");
  players.forEach(p => {
    const pawn = pawns[p.pawn];
    pawn.style.display="block";
    placePawn(pawn,0);
  });

  setup.classList.add("hidden");
  gameControls.classList.remove("hidden");
  objectivePanel.classList.remove("hidden");

  updateTurn();
};

// ===============================
// TURN
// ===============================
function updateTurn(){
  turnInfo.textContent = `Vez do Jogador ${currentPlayer + 1}`;
  objectivePanel.innerHTML =
    `<strong>Objetivo:</strong><br>${players[currentPlayer].objective}`;
}

// ===============================
// JOGAR
// ===============================
rollBtn.onclick = async () => {
  const r = Math.floor(Math.random()*6)+1;
  diceVal.textContent = r;

  const pawnId = players[currentPlayer].pawn;

  for(let i=0;i<r;i++){
    positions[pawnId] = Math.min(SPACES.length-1, positions[pawnId]+1);
    placePawn(pawns[pawnId], positions[pawnId]);
    await new Promise(res=>setTimeout(res,300));
  }

  currentPlayer = (currentPlayer+1)%players.length;
  updateTurn();
};
</script>

</body>
</html>
