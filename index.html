<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jogo da EN2 ‚Äî A Grande Travessia de Portugal</title>

<style>
:root{
  --bg:#111;
  --accent:#f5c400;
  --text:#fff;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Arial,Helvetica,sans-serif;
}
.wrap{
  max-width:1200px;
  margin:20px auto;
  text-align:center;
}
.board-frame{
  max-width:1000px;
  aspect-ratio:4/3;
  margin:0 auto;
  position:relative;
  overflow:hidden;
  border-radius:8px;
}
.board-img{
  position:absolute;
  inset:0;
  background:url("https://i.imgur.com/SgYhoY8.png") center/cover no-repeat;
}
.zoom{
  position:absolute;
  inset:0;
}
.pawn{
  position:absolute;
  width:22px;
  height:22px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.pawn.car{background:#f5c400;color:#111}
.pawn.bike{background:#4bb39a;color:#06231a}
.pawn.motor{background:#ef4a8a;color:#2a001a}
.pawn.person{background:#4267ff;color:#04204a}

.controls{margin-top:16px}
button{
  background:var(--accent);
  border:none;
  padding:10px 18px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
.hidden{display:none}

#objectivePanel{
  margin-top:16px;
  padding:12px;
  border:1px solid #444;
  border-radius:8px;
  max-width:600px;
  margin-left:auto;
  margin-right:auto;
  text-align:left;
}
#objectivePanel h3{margin-top:0}
</style>
</head>

<body>
<div class="wrap">
<h1>Jogo da EN2 ‚Äî A Grande Travessia de Portugal</h1>

<div class="board-frame" id="boardFrame">
  <div class="zoom">
    <div class="board-img"></div>
    <div class="pawn car" id="pawn0">üöó</div>
    <div class="pawn bike" id="pawn1">üö¥</div>
    <div class="pawn motor" id="pawn2">üèçÔ∏è</div>
    <div class="pawn person" id="pawn3">üö∂</div>
  </div>
</div>

<div class="controls">
  <div id="setupPlayers">
    Jogadores:
    <select id="playerCount">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>
    <button id="startBtn">COME√áAR</button>
  </div>

  <div id="pawnSelect" class="hidden">
    <p id="pawnQuestion"></p>
    <div id="pawnButtons"></div>
  </div>

  <div id="gameControls" class="hidden">
    <button id="rollBtn">JOGAR</button>
    üé≤ <span id="diceVal">‚Äî</span>
    <p id="turnInfo"></p>
  </div>

  <div id="objectivePanel" class="hidden"></div>
</div>
</div>

<script>
// ===============================
// SPACES (casas reais do tabuleiro)
// ===============================
const SPACES = [...Array(95)].map(()=>({x:0.5,y:0.5})); // placeholder seguro

// ===============================
// OBJETIVOS EN2 (13)
// ===============================
const OBJECTIVES = [
{
id:"OBJ1",
text:"O teu objectivo √© ser o primeiro a chegar a Faro (Km 738,5).",
targets:[{label:"Faro",km:738.5}]
},
{
id:"OBJ2",
text:"Quem disse que o √∫ltimo n√£o pode ganhar?\nO teu objectivo √© ser o √∫ltimo a chegar a Faro (Km 738,5).",
targets:[{label:"Faro",km:738.5}]
},
{
id:"OBJ3",
text:"Tens como objectivo visitar:\nChaves Km 0\nTondela Km 200\nAbrantes Km 400\nCiborro Km 500\nFaro Km 738",
targets:[
{label:"Chaves",km:0},
{label:"Tondela",km:200},
{label:"Abrantes",km:400},
{label:"Ciborro",km:500},
{label:"Faro",km:738}
]
},
{
id:"OBJ4",
text:"Tens como objectivo visitar:\nVila Pouca de Aguiar Km 35\nViseu Km 172\nG√≥is Km 271\nAlc√°√ßovas Km 551\nS√£o Br√°s de Alportel Km 722",
targets:[
{label:"Vila Pouca de Aguiar",km:35},
{label:"Viseu",km:172},
{label:"G√≥is",km:271},
{label:"Alc√°√ßovas",km:551},
{label:"S√£o Br√°s de Alportel",km:722}
]
},
{
id:"OBJ5",
text:"Tens como objectivo visitar:\nVila Real Km 64\nSanta Comba D√£o Km 213\nSert√£ Km 345\nTorr√£o Km 565\nAmeixial Km 688",
targets:[
{label:"Vila Real",km:64},
{label:"Santa Comba D√£o",km:213},
{label:"Sert√£",km:345},
{label:"Torr√£o",km:565},
{label:"Ameixial",km:688}
]
},
{
id:"OBJ6",
text:"Tens como objectivo visitar:\nS√£o Pedro do Sul Km 152\nPedr√≥g√£o Grande Km 317\nAvis Km 466\nMontemor-o-Novo Km 518\nAlmod√¥var Km 663",
targets:[
{label:"S√£o Pedro do Sul",km:152},
{label:"Pedr√≥g√£o Grande",km:317},
{label:"Avis",km:466},
{label:"Montemor-o-Novo",km:518},
{label:"Almod√¥var",km:663}
]
},
{
id:"OBJ7",
text:"Tens como objectivo visitar:\nSanta Marta de Penagui√£o Km 81\nMort√°gua Km 225\nSert√£ Km 345\nFerreira do Alentejo Km 595\nFaro Km 738",
targets:[
{label:"Santa Marta de Penagui√£o",km:81},
{label:"Mort√°gua",km:225},
{label:"Sert√£",km:345},
{label:"Ferreira do Alentejo",km:595},
{label:"Faro",km:738}
]
},
{
id:"OBJ8",
text:"Tens como objectivo visitar:\nPeso da R√©gua Km 88\nPenacova Km 238\nVila de Rei Km 366\nAljustrel Km 619\nFaro Km 738,5",
targets:[
{label:"Peso da R√©gua",km:88},
{label:"Penacova",km:238},
{label:"Vila de Rei",km:366},
{label:"Aljustrel",km:619},
{label:"Faro",km:738.5}
]
},
{
id:"OBJ9",
text:"Tens como objectivo visitar:\nLamego Km 104\nVila Nova de Poiares Km 248\nSardoal Km 386\nCastro Verde Km 640\nFaro Km 738",
targets:[
{label:"Lamego",km:104},
{label:"Vila Nova de Poiares",km:248},
{label:"Sardoal",km:386},
{label:"Castro Verde",km:640},
{label:"Faro",km:738}
]
},
{
id:"OBJ10",
text:"Tens como objectivo visitar:\nCastro Daire Km 136\nLous√£ Km 260\nPonte de S√¥r Km 430\nKm 666\nFaro Km 738,5",
targets:[
{label:"Castro Daire",km:136},
{label:"Lous√£",km:260},
{label:"Ponte de S√¥r",km:430},
{label:"Km 666",km:666},
{label:"Faro",km:738.5}
]
},
{
id:"OBJ11",
text:"Tens como objectivo visitar:\nChaves Km 0\nMeio da Estrada Km 369\nFaro Km 738",
targets:[
{label:"Chaves",km:0},
{label:"Meio da Estrada",km:369},
{label:"Faro",km:738}
]
},
{
id:"OBJ12",
text:"Tens como objectivo visitar:\nChaves Km 0\nFaro Km 738",
targets:[
{label:"Chaves",km:0},
{label:"Faro",km:738}
]
},
{
id:"OBJ13",
text:"Tens como objectivo visitar:\nKm 69\nMeio da Estrada Km 369\nMora Km 476\nCoruche Km 494\nFaro Km 738",
targets:[
{label:"Km 69",km:69},
{label:"Meio da Estrada",km:369},
{label:"Mora",km:476},
{label:"Coruche",km:494},
{label:"Faro",km:738}
]
}
];

// ===============================
// JOGO
// ===============================
const pawns=[
document.getElementById("pawn0"),
document.getElementById("pawn1"),
document.getElementById("pawn2"),
document.getElementById("pawn3")
];

const pawnTypes=[
{id:0,label:"üöó Carro"},
{id:1,label:"üö¥ Bicicleta"},
{id:2,label:"üèçÔ∏è Mota"},
{id:3,label:"üö∂ Pessoa"}
];

let players=[];
let positions=[0,0,0,0];
let currentPlayer=0;

const board=document.getElementById("boardFrame");

function placePawn(pawn,i){
const s=SPACES[i];
pawn.style.left=(s.x*board.clientWidth)+"px";
pawn.style.top=(s.y*board.clientHeight)+"px";
}
pawns.forEach(p=>placePawn(p,0));

// ===============================
// SETUP
// ===============================
startBtn.onclick=()=>{
players=[];
currentPlayer=0;
document.getElementById("setupPlayers").classList.add("hidden");
document.getElementById("pawnSelect").classList.remove("hidden");
renderPawnButtons(Number(playerCount.value));
updatePawnQuestion();
};

function updatePawnQuestion(){
pawnQuestion.textContent=`Jogador ${players.length+1}, como quer viajar?`;
}

function renderPawnButtons(max){
pawnButtons.innerHTML="";
pawnTypes.forEach(p=>{
if(players.includes(p.id))return;
const b=document.createElement("button");
b.textContent=p.label;
b.onclick=()=>{
players.push({pawn:p.id,objective:null});
if(players.length===max)startGame();
else{updatePawnQuestion();renderPawnButtons(max);}
};
pawnButtons.appendChild(b);
});
}

// ===============================
// INICIAR JOGO
// ===============================
function startGame(){
pawnSelect.classList.add("hidden");
gameControls.classList.remove("hidden");
objectivePanel.classList.remove("hidden");

// baralhar objetivos
const deck=[...OBJECTIVES].sort(()=>Math.random()-0.5);
players.forEach(p=>p.objective=deck.pop());

updateTurn();
}

function updateTurn(){
turnInfo.textContent=`Vez do Jogador ${currentPlayer+1}`;
renderObjective();
}

function renderObjective(){
const obj=players[currentPlayer].objective;
objectivePanel.innerHTML=
`<h3>üéØ Objetivo</h3><pre>${obj.text}</pre>`;
}

// ===============================
// JOGAR
// ===============================
rollBtn.onclick=async()=>{
rollBtn.disabled=true;
const r=Math.floor(Math.random()*6)+1;
diceVal.textContent=r;

const pawnId=players[currentPlayer].pawn;
for(let i=0;i<r;i++){
positions[pawnId]=Math.min(SPACES.length-1,positions[pawnId]+1);
placePawn(pawns[pawnId],positions[pawnId]);
await new Promise(res=>setTimeout(res,300));
}

currentPlayer=(currentPlayer+1)%players.length;
updateTurn();
rollBtn.disabled=false;
};
</script>
</body>
</html>
