<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jogo da EN2 ‚Äî A Grande Travessia de Portugal</title>

<style>
:root{
  --bg:#111;
  --accent:#f5c400;
  --text:#fff;
}
html,body{
  height:100%;
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:1200px;
  margin:20px auto;
  text-align:center;
}
h1{margin-bottom:16px}

.board-frame{
  width:100%;
  max-width:1000px;
  aspect-ratio:4/3;
  margin:0 auto;
  position:relative;
  overflow:hidden;
  border-radius:8px;
  background:#000;
  box-shadow:0 8px 30px rgba(0,0,0,.6);
}

.zoom{
  position:absolute;
  inset:0;
  transform-origin:center center;
  transition:transform .6s ease;
  pointer-events:none;
}

.board-img{
  position:absolute;
  inset:0;
  background-image:url("https://i.imgur.com/SgYhoY8.png");
  background-size:cover;
  background-position:center;
}

.pawn{
  position:absolute;
  width:18px;
  height:18px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10px;
  cursor:pointer;
  pointer-events:auto;
  box-shadow:0 4px 10px rgba(0,0,0,.6);
}
.pawn.selected{outline:2px solid #fff}

.pawn.car{background:#f5c400;color:#111}
.pawn.bike{background:#4bb39a;color:#06231a}
.pawn.motor{background:#ef4a8a;color:#2a001a}
.pawn.person{background:#4267ff;color:#04204a}

.controls{
  margin-top:16px;
  display:flex;
  gap:12px;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
}

.btn{
  padding:10px 20px;
  border-radius:8px;
  border:none;
  background:var(--accent);
  font-weight:bold;
  cursor:pointer;
}

.help{
  margin-top:10px;
  font-size:14px;
  color:#ccc;
}
</style>
</head>

<body>
<div class="wrap">
  <h1>JOGO DA EN2 ‚Äî A Grande Travessia de Portugal</h1>

  <div class="board-frame" id="boardFrame">
    <div class="zoom" id="zoomWrap">
      <div class="board-img"></div>

      <div class="pawn car" id="pawn0">üöó</div>
      <div class="pawn bike" id="pawn1">üö¥</div>
      <div class="pawn motor" id="pawn2">üèçÔ∏è</div>
      <div class="pawn person" id="pawn3">üö∂</div>
    </div>
  </div>

  <!-- SETUP JOGADORES -->
  <div class="controls" id="setupPlayers">
    <label>N¬∫ de jogadores:</label>
    <select id="playerCount">
      <option value="">‚Äî</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>
    <button class="btn" id="startGame">Come√ßar jogo</button>
  </div>

  <!-- CONTROLOS DO JOGO -->
  <div class="controls">
    <label>Pe√£o:</label>
    <select id="selectPawn">
      <option value="0">Carro üöó</option>
      <option value="1">Bicicleta üö¥</option>
      <option value="2">Mota üèçÔ∏è</option>
      <option value="3">Pessoa üö∂</option>
    </select>

    <button class="btn" id="rollBtn">JOGAR</button>
    üé≤ <strong id="diceVal">‚Äî</strong>
  </div>

  <div class="help">
    Escolhe o n¬∫ de jogadores, depois lan√ßa o dado.
  </div>
</div>

<script>
// ===============================
// CASAS (DO PICKER)
// ===============================
const SPACES = [
  {"x":0.0916,"y":0.1138},{"x":0.0867,"y":0.1625},{"x":0.0867,"y":0.2153},
  {"x":0.0916,"y":0.2701},{"x":0.1271,"y":0.2356},{"x":0.1506,"y":0.1896},
  {"x":0.1762,"y":0.1436},{"x":0.2188,"y":0.1131},{"x":0.2651,"y":0.0942},
  {"x":0.3055,"y":0.1023},{"x":0.3459,"y":0.1300},{"x":0.3595,"y":0.1767},
  {"x":0.3246,"y":0.2160},{"x":0.2875,"y":0.1923},{"x":0.2428,"y":0.1720},
  {"x":0.2199,"y":0.2180},{"x":0.2384,"y":0.2701},{"x":0.2280,"y":0.3188},
  {"x":0.1811,"y":0.3269},{"x":0.1391,"y":0.3357},{"x":0.1129,"y":0.3871},
  {"x":0.1195,"y":0.4372},{"x":0.1571,"y":0.4690},{"x":0.2002,"y":0.4501},
  {"x":0.2340,"y":0.4122},{"x":0.2613,"y":0.3689},{"x":0.2941,"y":0.3276},
  {"x":0.3333,"y":0.2999},{"x":0.3786,"y":0.3181},{"x":0.4026,"y":0.3601},
  {"x":0.4070,"y":0.4196},{"x":0.3824,"y":0.4555},{"x":0.3377,"y":0.4893},
  {"x":0.2968,"y":0.5049},{"x":0.2510,"y":0.5191},{"x":0.2040,"y":0.5502},
  {"x":0.1757,"y":0.5888},{"x":0.1888,"y":0.6456},{"x":0.2335,"y":0.6652},
  {"x":0.2771,"y":0.6517},{"x":0.3175,"y":0.6314},{"x":0.3595,"y":0.6070},
  {"x":0.4004,"y":0.5725},{"x":0.4283,"y":0.5421},{"x":0.4654,"y":0.5015},
  {"x":0.4915,"y":0.4677},{"x":0.5237,"y":0.4291},{"x":0.5614,"y":0.4027},
  {"x":0.5990,"y":0.3635},{"x":0.6378,"y":0.3405},{"x":0.6825,"y":0.3249},
  {"x":0.7256,"y":0.3364},{"x":0.7409,"y":0.3858},{"x":0.7098,"y":0.4331},
  {"x":0.6716,"y":0.4636},{"x":0.6296,"y":0.4866},{"x":0.5881,"y":0.5116},
  {"x":0.5526,"y":0.5434},{"x":0.5281,"y":0.5806},{"x":0.5303,"y":0.6422},
  {"x":0.5576,"y":0.6862},{"x":0.5996,"y":0.6950},{"x":0.6416,"y":0.6713},
  {"x":0.6688,"y":0.6246},{"x":0.6972,"y":0.5779},{"x":0.7300,"y":0.5319},
  {"x":0.7665,"y":0.5069},{"x":0.8091,"y":0.5346},{"x":0.8200,"y":0.5861},
  {"x":0.7949,"y":0.6409},{"x":0.7496,"y":0.6517},{"x":0.7054,"y":0.6666},
  {"x":0.7092,"y":0.7133},{"x":0.7278,"y":0.7667},{"x":0.7027,"y":0.8195},
  {"x":0.6623,"y":0.8012},{"x":0.6127,"y":0.7769},{"x":0.5859,"y":0.8195},
  {"x":0.6099,"y":0.8689},{"x":0.6487,"y":0.8898},{"x":0.6912,"y":0.8919},
  {"x":0.7425,"y":0.8716},{"x":0.7801,"y":0.8330},{"x":0.7998,"y":0.7863},
  {"x":0.8145,"y":0.7396},{"x":0.8522,"y":0.6902},{"x":0.8696,"y":0.7478},
  {"x":0.8909,"y":0.7897},{"x":0.9078,"y":0.8479},{"x":0.8980,"y":0.9027}
];

// ===============================
// ELEMENTOS
// ===============================
const boardFrame = document.getElementById("boardFrame");
const zoomWrap   = document.getElementById("zoomWrap");
const pawns      = [...document.querySelectorAll(".pawn")];
const selectPawn = document.getElementById("selectPawn");
const rollBtn    = document.getElementById("rollBtn");
const diceVal    = document.getElementById("diceVal");
const setupDiv   = document.getElementById("setupPlayers");
const playerSel  = document.getElementById("playerCount");
const startBtn   = document.getElementById("startGame");

// ===============================
// ESTADO
// ===============================
let pos = [0,0,0,0];
let selected = 0;
let playerCount = 0;

// ===============================
// FUN√á√ïES
// ===============================
function placePawn(i){
  const s = SPACES[pos[i]];
  pawns[i].style.left = (s.x * boardFrame.clientWidth) + "px";
  pawns[i].style.top  = (s.y * boardFrame.clientHeight) + "px";
}

function zoomTo(i,scale=1.25){
  const s = SPACES[pos[i]];
  const x = s.x * boardFrame.clientWidth;
  const y = s.y * boardFrame.clientHeight;
  const cx = boardFrame.clientWidth/2;
  const cy = boardFrame.clientHeight/2;
  zoomWrap.style.transform =
    `translate(${(cx-x)*(scale-1)}px, ${(cy-y)*(scale-1)}px) scale(${scale})`;
}

async function movePawn(i,steps){
  for(let n=0;n<steps;n++){
    if(pos[i]>=SPACES.length-1) break;
    pos[i]++;
    placePawn(i);
    zoomTo(i,1.3);
    await new Promise(r=>setTimeout(r,600));
  }
  zoomTo(i,1.1);
}

function setSelected(i){
  selected=i;
  pawns.forEach((p,idx)=>p.classList.toggle("selected",idx===i));
  selectPawn.value=i;
}

// ===============================
// EVENTOS
// ===============================
startBtn.onclick=()=>{
  playerCount=Number(playerSel.value);
  if(!playerCount){alert("Escolhe jogadores");return;}
  pawns.forEach((p,i)=>p.style.display=i<playerCount?"block":"none");
  for(let i=0;i<playerCount;i++){pos[i]=0;placePawn(i);}
  setSelected(0);
  setupDiv.style.display="none";
  rollBtn.disabled=false;
};

rollBtn.onclick=async()=>{
  rollBtn.disabled=true;
  const r=Math.floor(Math.random()*6)+1;
  diceVal.textContent=r;
  await movePawn(selected,r);
  rollBtn.disabled=false;
};

selectPawn.onchange=e=>setSelected(Number(e.target.value));
pawns.forEach((p,i)=>p.onclick=()=>setSelected(i));

// INIT
rollBtn.disabled=true;
pawns.forEach((p,i)=>placePawn(i));
setSelected(0);
</script>
</body>
</html>
