<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jogo da EN2</title>

<style>
:root{
  --bg:#111;
  --accent:#f5c400;
  --text:#fff;
}
html,body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Arial,Helvetica,sans-serif;
}
.wrap{
  max-width:1200px;
  margin:20px auto;
  text-align:center;
}
.board-frame{
  max-width:1000px;
  margin:0 auto;
  aspect-ratio:4/3;
  position:relative;
  overflow:hidden;
  border-radius:8px;
}
.board-img{
  position:absolute;
  inset:0;
  background:url("https://i.imgur.com/SgYhoY8.png") center/cover no-repeat;
}
.zoom{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.pawn{
  position:absolute;
  width:22px;
  height:22px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.pawn.car{background:#f5c400;color:#111}
.pawn.bike{background:#4bb39a;color:#06231a}
.pawn.motor{background:#ef4a8a;color:#2a001a}
.pawn.person{background:#4267ff;color:#04204a}

.controls{margin-top:20px}
button{
  background:var(--accent);
  border:none;
  padding:10px 18px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
.hidden{display:none}

.pawn-buttons button{
  margin:6px;
}
</style>
</head>

<body>
<div class="wrap">
  <h1>Jogo da EN2</h1>

  <div class="board-frame" id="boardFrame">
    <div class="zoom">
      <div class="board-img"></div>
      <div class="pawn car" id="pawn0">üöó</div>
      <div class="pawn bike" id="pawn1">üö¥</div>
      <div class="pawn motor" id="pawn2">üèçÔ∏è</div>
      <div class="pawn person" id="pawn3">üö∂</div>
    </div>
  </div>

  <div class="controls">
    <div id="setupPlayers">
      Jogadores:
      <select id="playerCount">
        <option>1</option>
        <option selected>2</option>
        <option>3</option>
        <option>4</option>
      </select>
      <button id="startBtn">COME√áAR</button>
    </div>

    <div id="pawnSelect" class="hidden">
      <p id="pawnQuestion"></p>
      <div class="pawn-buttons" id="pawnButtons"></div>
    </div>

    <div id="gameControls" class="hidden">
      <button id="rollBtn">JOGAR</button>
      üé≤ <span id="diceVal">‚Äî</span>
      <p id="turnInfo"></p>
    </div>
  </div>
</div>

<script>
// ===============================
// CASAS
// ===============================
const SPACES = [
  {x:0.0916,y:0.1137},{x:0.0867,y:0.1625},{x:0.0867,y:0.2152},
  {x:0.0916,y:0.2700},{x:0.1271,y:0.2355},{x:0.1505,y:0.1895},
  {x:0.1762,y:0.1435},{x:0.2187,y:0.1131},{x:0.2651,y:0.0941},
  {x:0.3055,y:0.1022},{x:0.3458,y:0.1300},{x:0.3595,y:0.1767},
  {x:0.3246,y:0.2159},{x:0.2875,y:0.1922},{x:0.2427,y:0.1719},
  {x:0.2198,y:0.2179},{x:0.2384,y:0.2700}
];

// ===============================
// JOGO
// ===============================
const pawns = [
  document.getElementById("pawn0"),
  document.getElementById("pawn1"),
  document.getElementById("pawn2"),
  document.getElementById("pawn3")
];

const pawnTypes = [
  {id:0,label:"üöó Carro"},
  {id:1,label:"üö¥ Bicicleta"},
  {id:2,label:"üèçÔ∏è Mota"},
  {id:3,label:"üö∂ Pessoa"}
];

let players = [];
let positions = [0,0,0,0];
let currentPlayer = 0;

const board = document.getElementById("boardFrame");

function placePawn(pawn,i){
  const s = SPACES[i];
  pawn.style.left = (s.x * board.clientWidth) + "px";
  pawn.style.top  = (s.y * board.clientHeight) + "px";
}
pawns.forEach(p=>placePawn(p,0));

// ===============================
// SETUP
// ===============================
document.getElementById("startBtn").onclick = ()=>{
  const count = Number(playerCount.value);
  players = [];
  currentPlayer = 0;
  document.getElementById("setupPlayers").classList.add("hidden");
  document.getElementById("pawnSelect").classList.remove("hidden");
  updatePawnQuestion();
  renderPawnButtons(count);
};

function updatePawnQuestion(){
  document.getElementById("pawnQuestion").textContent =
    `Jogador ${players.length+1}, como quer viajar?`;
}

function renderPawnButtons(maxPlayers){
  const wrap = document.getElementById("pawnButtons");
  wrap.innerHTML = "";
  pawnTypes.forEach(p=>{
    if(players.includes(p.id)) return;
    const b = document.createElement("button");
    b.textContent = p.label;
    b.onclick = ()=>{
      players.push(p.id);
      if(players.length === maxPlayers){

  // esconder pe√µes n√£o usados
  pawns.forEach((pawn, index) => {
    if (!players.includes(index)) {
      pawn.style.display = "none";
    }
  });

  document.getElementById("pawnSelect").classList.add("hidden");
  document.getElementById("gameControls").classList.remove("hidden");
  turnInfo.textContent = "Vez do Jogador 1";
}
    };
    wrap.appendChild(b);
  });
}

// ===============================
// JOGO
// ===============================
rollBtn.onclick = async ()=>{
  rollBtn.disabled = true;
  const r = Math.floor(Math.random()*6)+1;
  diceVal.textContent = r;
  const pawnId = players[currentPlayer];
  for(let i=0;i<r;i++){
    positions[pawnId] = Math.min(SPACES.length-1, positions[pawnId]+1);
    placePawn(pawns[pawnId], positions[pawnId]);
    await new Promise(res=>setTimeout(res,300));
  }
  currentPlayer = (currentPlayer+1) % players.length;
  turnInfo.textContent = "Vez do Jogador " + (currentPlayer+1);
  rollBtn.disabled = false;
};
</script>
</body>
</html>
