<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Jogo da EN2 â€” Base EstÃ¡vel</title>

<style>
:root{
  --bg:#111;
  --accent:#f5c400;
  --text:#fff;
}
html,body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Arial, sans-serif;
}
.wrap{
  max-width:1200px;
  margin:20px auto;
  text-align:center;
}
.board-frame{
  max-width:1000px;
  aspect-ratio:4/3;
  margin:auto;
  position:relative;
  overflow:hidden;
}
.board-img{
  position:absolute;
  inset:0;
  background:url("https://i.imgur.com/SgYhoY8.png") center/cover no-repeat;
}
.zoom{
  position:absolute;
  inset:0;
  transition:transform .6s ease;
}
.pawn{
  position:absolute;
  width:18px;
  height:18px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  cursor:pointer;
}
.car{background:#f5c400}
.bike{background:#4bb39a}
.motor{background:#ef4a8a}
.person{background:#4267ff}
.selected{outline:2px solid #fff}

.controls{margin-top:15px}
button{
  padding:10px 20px;
  font-weight:bold;
  background:#f5c400;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="wrap">
  <h1>JOGO DA EN2</h1>

  <div class="board-frame" id="board">
    <div class="zoom" id="zoom">
      <div class="board-img"></div>
      <div class="pawn car" id="pawn0"></div>
      <div class="pawn bike" id="pawn1"></div>
      <div class="pawn motor" id="pawn2"></div>
      <div class="pawn person" id="pawn3"></div>
    </div>
  </div>
<div class="controls" id="setupPlayers">
  <label>NÂº de jogadores:</label>
  <select id="playerCount">
    <option value="">â€”</option>
    <option value="1">1 jogador</option>
    <option value="2">2 jogadores</option>
    <option value="3">3 jogadores</option>
    <option value="4">4 jogadores</option>
  </select>

  <button id="startGame">ComeÃ§ar jogo</button>
</div>

  <div class="controls">
    <select id="selectPawn">
      <option value="0">Carro</option>
      <option value="1">Bicicleta</option>
      <option value="2">Mota</option>
      <option value="3">Pessoa</option>
    </select>
    <button id="roll">JOGAR</button>
    ðŸŽ² <span id="dice">â€”</span>
  </div>
</div>

<script>
// ===============================
// SPACES â€” COORDENADAS REAIS (CASA A CASA)
// ===============================
const SPACES = [
  {x:0.09165,y:0.11379},{x:0.08674,y:0.16250},{x:0.08674,y:0.21528},
  {x:0.09165,y:0.27008},{x:0.12711,y:0.23558},{x:0.15057,y:0.18957},
  {x:0.17621,y:0.14356},{x:0.21876,y:0.11311},{x:0.26513,y:0.09417},
  {x:0.30551,y:0.10229},{x:0.34588,y:0.13003},{x:0.35951,y:0.17671},
  {x:0.32460,y:0.21595},{x:0.28750,y:0.19227},{x:0.24277,y:0.17198},
  {x:0.21985,y:0.21798},{x:0.23840,y:0.27008},{x:0.22804,y:0.31880},
  {x:0.18112,y:0.32691},{x:0.13911,y:0.33571},{x:0.11292,y:0.38713},
  {x:0.11947,y:0.43720},{x:0.15711,y:0.46900},{x:0.20021,y:0.45005},
  {x:0.23404,y:0.41217},{x:0.26132,y:0.36886},{x:0.29405,y:0.32759},
  {x:0.33333,y:0.29985},{x:0.37861,y:0.31812},{x:0.40261,y:0.36007},
  {x:0.40698,y:0.41961},{x:0.38243,y:0.45547},{x:0.33769,y:0.48930},
  {x:0.29678,y:0.50486},{x:0.25095,y:0.51907},{x:0.20403,y:0.55019},
  {x:0.17566,y:0.58876},{x:0.18876,y:0.64559},{x:0.23349,y:0.66521},
  {x:0.27714,y:0.65168},{x:0.31751,y:0.63138},{x:0.35951,y:0.60702},
  {x:0.40043,y:0.57252},{x:0.42825,y:0.54207},{x:0.46535,y:0.50148},
  {x:0.49154,y:0.46765},{x:0.52373,y:0.42908},{x:0.56137,y:0.40269},
  {x:0.59901,y:0.36345},{x:0.63775,y:0.34045},{x:0.68248,y:0.32489},
  {x:0.72558,y:0.33639},{x:0.74086,y:0.38578},{x:0.70976,y:0.43314},
  {x:0.67157,y:0.46359},{x:0.62956,y:0.48659},{x:0.58810,y:0.51162},
  {x:0.55264,y:0.54342},{x:0.52809,y:0.58064},{x:0.53027,y:0.64221},
  {x:0.55755,y:0.68618},{x:0.59956,y:0.69498},{x:0.64157,y:0.67130},
  {x:0.66884,y:0.62461},{x:0.69721,y:0.57793},{x:0.72995,y:0.53192},
  {x:0.76650,y:0.50689},{x:0.80905,y:0.53463},{x:0.81996,y:0.58605},
  {x:0.79487,y:0.64085},{x:0.74959,y:0.65168},{x:0.70540,y:0.66656},
  {x:0.70921,y:0.71325},{x:0.72776,y:0.76670},{x:0.70267,y:0.81947},
  {x:0.66230,y:0.80120},{x:0.61265,y:0.77685},{x:0.58592,y:0.81947},
  {x:0.60992,y:0.86886},{x:0.64866,y:0.88984},{x:0.69121,y:0.89187},
  {x:0.74249,y:0.87157},{x:0.78014,y:0.83300},{x:0.79978,y:0.78632},
  {x:0.81451,y:0.73963},{x:0.85215,y:0.69024},{x:0.86961,y:0.74775},
  {x:0.89088,y:0.78970},{x:0.90780,y:0.84789},{x:0.89798,y:0.90269}
];

// ===============================
// MOTOR DO JOGO
// ===============================
const board = document.getElementById("board");
const zoom  = document.getElementById("zoom");
const pawns = [
  document.getElementById("pawn0"),
  document.getElementById("pawn1"),
  document.getElementById("pawn2"),
  document.getElementById("pawn3")
];
const rollBtn = document.getElementById("roll");
const diceEl  = document.getElementById("dice");
const select  = document.getElementById("selectPawn");

let pos = [0,0,0,0];
let selected = 0;

function placePawn(i){
  const s = SPACES[pos[i]];
  pawns[i].style.left = s.x * board.clientWidth + "px";
  pawns[i].style.top  = s.y * board.clientHeight + "px";
}

function zoomTo(i,scale){
  const s = SPACES[pos[i]];
  const cx = board.clientWidth/2;
  const cy = board.clientHeight/2;
  zoom.style.transform =
    `translate(${(cx-s.x*board.clientWidth)*(scale-1)}px,
               ${(cy-s.y*board.clientHeight)*(scale-1)}px)
     scale(${scale})`;
}

async function movePawn(i,steps){
  for(let n=0;n<steps;n++){
    if(pos[i] >= SPACES.length-1) break;
    pos[i]++;
    placePawn(i);
    zoomTo(i,1.25);
    await new Promise(r=>setTimeout(r,600));
  }
  zoomTo(i,1.1);
}

function setSelected(i){
  selected=i;
  pawns.forEach((p,idx)=>p.classList.toggle("selected",idx===i));
  select.value=i;
}

rollBtn.onclick = async ()=>{
  const r = Math.floor(Math.random()*6)+1;
  diceEl.textContent = r;
  await movePawn(selected,r);
};

select.onchange = e => setSelected(+e.target.value);
pawns.forEach((p,i)=>p.onclick = ()=>setSelected(i));

// INIT
pawns.forEach((_,i)=>placePawn(i));
setSelected(0);
</script>
</body>
</html>
